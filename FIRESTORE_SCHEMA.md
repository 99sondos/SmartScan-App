# Firestore Data Model

This document outlines the schema for the Firestore database used in the SmartScan project.

## Collections

### `users`

Stores user-specific information, including personalization settings.

-   **Document ID:** `uid` (Firebase Auth User ID)
-   **Schema:**
    ```json
    {
      "skinType": "String",
      "allergies": "Array<String>",
      "blacklist": "Array<String>",
      "createdAt": "Timestamp"
    }
    ```

### `products`

Contains detailed information about skincare and makeup products.

-   **Document ID:** `barcode` (EAN-13)
-   **Schema:**
    ```json
    {
      "barcode": "String",
      "brand": "String",
      "name": "String",
      "category": "String",
      "ingredients": "Array<String>",
      "source": "String (e.g., 'obf', 'manual')",
      "obfId": "String?",
      "lastSynced": "Timestamp"
    }
    ```

### `scans`

Records each scan event and its associated analysis.

-   **Document ID:** auto-generated by Firestore
-   **Schema:**
    ```json
    {
      "uid": "String",
      "barcode": "String?",
      "ocrText": "String?",
      "productKey": "String?",
      "flags": "Array<String>",
      "explanation": "Map?",
      "status": "String (e.g., 'pending', 'enriched', 'failed')",
      "createdAt": "Timestamp"
    }
    ```
